(this["webpackJsonpbookstore-react-redux"]=this["webpackJsonpbookstore-react-redux"]||[]).push([[0],{33:function(e,t,n){},37:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),r=n(14),a=n.n(r),s=(n(33),n(7)),i=(n(37),n(18)),d=n(2),l=n(43),u=n(11),b=n(9),j=n.n(b),p=n(26),h=n(19),O="bookStore/books/ADD_BOOK",f="bookStore/books/REMOVE_BOOK",x="bookStore/books/MODAL",m="FETCH_LOADING",k="FETCH_SUCCESS",v="FETCH_ERROR",g={loading:!0,books:[],error:""},y=[{},{}],E=function(){return{type:m}},N=function(){return function(){var e=Object(h.a)(j.a.mark((function e(t){var n,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(E()),e.next=3,fetch("https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi/apps/DLyLFq2oHapm6zHBdl0d/books");case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,o=Object.entries(c).map((function(e){return Object(p.a)(e[1])})),Object.keys(c).forEach((function(e,t){o[t][0].id=e})),t({type:k,payload:o});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:case k:return{loading:!1,books:t.payload,error:""};case f:return e.filter((function(e){return e.id!==t.payload}));default:return e;case m:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case v:return{loading:!1,books:[],error:t.payload}}},A=n(1),B=function(e){var t=e.progress,n=80*Math.PI,c=n-t/100*n;return Object(A.jsxs)("div",{className:"percent",children:[Object(A.jsx)("svg",{height:100,width:100,children:Object(A.jsx)("circle",{stroke:"#20d2fa",fill:"transparent",strokeWidth:5,strokeDasharray:"".concat(n," ").concat(n),style:{strokeDashoffset:c},r:40,cx:50,cy:50})}),Object(A.jsxs)("p",{className:"percentage",children:[" ",t,"%",Object(A.jsx)("span",{className:"percentage-text",children:"Completed"})]})]})},S=function(e,t){var n=document.createElement("aside");n.textContent=e,n.id="error-popup",n.classList.add(t),setTimeout((function(){n.classList.add("fade")}),500),document.getElementById("root").appendChild(n),setTimeout((function(){document.getElementById("root").removeChild(document.getElementById("error-popup"))}),2500)},T=function(e){var t=e.book,n=t[0],c=n.id,o=n.title,r=n.category,a=n.progress,i=Object(s.b)();return Object(A.jsxs)("div",{className:"book-container",children:[Object(A.jsxs)("div",{className:"book-fp",children:[Object(A.jsx)("p",{className:"book-genre",children:r}),Object(A.jsx)("p",{className:"book-title",children:o}),Object(A.jsxs)("div",{className:"buttons",children:[Object(A.jsxs)("button",{className:"delete-book",type:"button",onClick:function(){var e;i((e=c,function(){var t=Object(h.a)(j.a.mark((function t(n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(E()),t.next=3,fetch("https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi/apps/DLyLFq2oHapm6zHBdl0d/books/".concat(e),{method:"DELETE",headers:{"Content-type":"application/json; charset=UTF-8"}});case 3:n(N());case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),S("Book removed","green")},children:[" ","Delete"]}),Object(A.jsxs)("button",{className:"delete-book",type:"button",onClick:function(){i({type:x,payload:{display:!1}})},children:[" ","Edit"]})]})]}),Object(A.jsx)(B,{progress:a}),Object(A.jsxs)("div",{className:"completion",children:[Object(A.jsx)("h3",{className:"chapter-title",children:"CURRENT CHAPTER"}),Object(A.jsx)("p",{className:"chapter-number",children:"Chapter 1"}),Object(A.jsx)("button",{type:"button",className:"chapter-button",children:"UPDATE PROGRESS"})]})]})},D=n(20),L=n(24),F=Object(D.b)({booksReducer:C,reducerModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;return t.type===x?[{display:!e.display},t.payload]:e}}),H=Object(D.c)(F,Object(D.a)(L.a)),R=function(e){var t=Object(s.c)((function(e){return e.reducerModal[1]})),n=t.title,c=t.author,o=t.genre,r=t.progress;return Object(A.jsx)("div",{id:"modal",children:Object(A.jsxs)("p",{children:[" ",n,Object(A.jsx)("br",{}),c,Object(A.jsx)("br",{}),o,Object(A.jsx)("br",{}),r," "]})})},w=n.p+"static/media/loading.cf3d5414.gif",M=function(){return Object(A.jsx)("div",{className:"spinner-container",children:Object(A.jsx)("img",{src:w,alt:"loading",className:"spinner"})})},U=function(){var e=Object(s.b)();Object(c.useEffect)((function(){e(N())}),[]);var t=Object(s.c)((function(e){return e.booksReducer.books})),n=Object(s.c)((function(e){return e.booksReducer.loading}));return t.forEach((function(e){e[0].progress=Math.floor(100*Math.random())})),Object(A.jsxs)("div",{className:"books-container",children:[n?Object(A.jsx)(M,{}):null,Object(A.jsx)(R,{}),t.map((function(e){return Object(A.jsx)(T,{book:e},Object(l.a)())}))]})},I=n(16),P=n(27),_=function(){var e=Object(s.b)(),t={id:"",title:"",genre:"Action"},n=Object(c.useState)(t),o=Object(P.a)(n,2),r=o[0],a=o[1],i=function(e){a(Object(u.a)(Object(u.a)({},r),{},Object(I.a)({},e.target.name,e.target.value)))};return Object(A.jsxs)("div",{className:"form-add",children:[Object(A.jsx)("h2",{className:"add-book",children:"Add a book "}),Object(A.jsxs)("form",{id:"form-add",children:[Object(A.jsx)("input",{type:"text",name:"title",placeholder:"Title",onChange:i}),Object(A.jsxs)("select",{defaultValue:"DEFAULT",id:"genre",name:"genre",onChange:i,children:[Object(A.jsx)("option",{value:"DEFAULT",disabled:!0,hidden:!0,children:"Category"}),Object(A.jsx)("option",{value:"Action",children:"Action"}),Object(A.jsx)("option",{value:"Science Fiction",children:"Science Fiction"}),Object(A.jsx)("option",{value:"Economy",children:"Economy"}),Object(A.jsx)("option",{value:"Horror",children:"Horror"})]}),Object(A.jsx)("button",{className:"add-button",onClick:function(){if(""===r.title)S("Please fill in the title","red");else{var n={id:Object(l.a)(),title:r.title,category:r.genre};S("Book added","green"),e((o=n,function(){var e=Object(h.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(E()),e.next=3,fetch("https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi/apps/DLyLFq2oHapm6zHBdl0d/books/",{method:"POST",body:JSON.stringify({item_id:o.id,title:o.title,category:o.category}),headers:{"Content-type":"application/json; charset=UTF-8"}});case 3:t(N());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),a(t);var c=document.getElementById("form-add");c.title.value="",c.genre.value="Action"}var o},type:"button",children:"Add Book"})]})]})},q=function(){return Object(A.jsxs)("nav",{className:"navBar",children:[Object(A.jsx)("h1",{className:"main-title",children:"Bookstore CMS"}),Object(A.jsx)("ul",{className:"navlist",children:[{id:1,path:"/",text:"Books"},{id:2,path:"/categories",text:"Categories"}].map((function(e){return Object(A.jsx)("li",{children:Object(A.jsx)(i.b,{to:e.path,activeClassName:"active-link",exact:!0,children:e.text})},e.id)}))})]})};var z=function(){var e=H.getState();return Object(A.jsxs)(i.a,{children:[Object(A.jsx)(q,{}),Object(A.jsxs)(d.c,{children:[Object(A.jsxs)(d.a,{exact:!0,path:"/",children:[Object(A.jsx)(U,{books:e}),Object(A.jsx)(_,{})]}),Object(A.jsx)(d.a,{path:"/categories",children:"Under construction"})]})]})};a.a.render(Object(A.jsx)(o.a.StrictMode,{children:Object(A.jsx)(s.a,{store:H,children:Object(A.jsx)(z,{})})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.d9bf76d1.chunk.js.map